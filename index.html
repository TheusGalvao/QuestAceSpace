<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Quest Ace Space</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container" id="quiz-container">
    <h2>Digite seu nome e idade para começar:</h2>
    <input type="text" id="nome" placeholder="Seu nome"><br>
    <input type="number" id="idade" placeholder="Idade"><br>
    <button class="enviar" onclick="iniciarQuiz()">Iniciar</button>
  </div>

  <!-- Firebase SDKs (usar sempre ANTES do script principal) -->
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>

  <!-- Inicialização do Firebase -->
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyA4rFposZJqX_wYWgOysqzA7d2pOocx6s0",
      authDomain: "respostas-quest-acespace.firebaseapp.com",
      projectId: "respostas-quest-acespace",
      storageBucket: "respostas-quest-acespace.appspot.com",
      messagingSenderId: "274617764889",
      appId: "1:274617764889:web:52f80ad4caac5fa05c6e88",
      measurementId: "G-CCV98BK0RF"
    };

    // Inicializa Firebase
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    // Perguntas do quiz
    const perguntas = [
      "Qual é a capital da França?",
      "Quanto é 2 + 2?",
      "Qual é a cor do céu?"
    ];
    const respostas = [
      ["Paris", "Londres", "Berlim"],
      ["3", "4", "5"],
      ["Azul", "Verde", "Vermelho"]
    ];
    let indiceAtual = 0;
    let nome = "";
    let idade = "";

    function iniciarQuiz() {
      nome = document.getElementById("nome").value;
      idade = document.getElementById("idade").value;
      if (!nome || !idade) {
        alert("Por favor, preencha seu nome e idade.");
        return;
      }
      mostrarPergunta();
    }

    function mostrarPergunta() {
      const container = document.getElementById("quiz-container");
      container.innerHTML = `<h2>${perguntas[indiceAtual]}</h2>`;
      respostas[indiceAtual].forEach((opcao, index) => {
        container.innerHTML += `<button onclick="responder('${opcao}')">${opcao}</button><br>`;
      });
    }

    function responder(respostaSelecionada) {
      const perguntaAtual = perguntas[indiceAtual];
      enviarParaFirebase(nome, idade, perguntaAtual, respostaSelecionada);
      indiceAtual++;
      if (indiceAtual < perguntas.length) {
        mostrarPergunta();
      } else {
        document.getElementById("quiz-container").innerHTML = `<h2>Obrigado por participar!</h2>`;
      }
    }

    function enviarParaFirebase(nome, idade, pergunta, resposta) {
      db.collection("respostas").add({
        nome: nome,
        idade: idade,
        pergunta: pergunta,
        resposta: resposta,
        timestamp: new Date()
      })
      .then(() => {
        console.log("Resposta salva com sucesso.");
      })
      .catch((error) => {
        console.error("Erro ao salvar resposta:", error);
      });
    }
  </script>
</body>
</html>